<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<link rel="stylesheet" href="../css/style.css">
<body>
  <div class="toplength">
      <div class="top">
          <a href="/views/about" class="topleft">陈耀辉</a>
          <a href="" class="topright">About</a>
        </div>
  </div>
  <div class="contentbox">
    <div class="content">
      <div class="contentInner">
          <h1 class="pagetitle">react的Diff算法知识</H1>
          <div class="pagedate">Nov 8</div>
          <div class="pagecontent">
              <h5>一、react的diff算法基本原理和源码解析</h5>
              <p class="hcontent">1、react的一大特点就是虚拟DOM的diff算法，下图为diff实现流程图。</p>
              <img src="react1.png" alt="" class="hcontent">
              <p class="hcontent">2、react对于同一层次的节点对比遇到不同就直接删除当前节点，然后再新建一个节点</p>
              <p class="hcontent">3、react对于同一节点下的子节点对比只会对比同一层次的子节点，所以只需要遍历一次既可以</p>
              <p class="hcontent">4、在开发组件时，保持稳定的 DOM 结构会有助于性能的提升。例如，可以通过 CSS 隐藏或显示节点，而不是真的移除或添加 DOM 节点。</p>
              <p class="hcontent">5、react给组件添加事件是添加的文档的根节点上，然后通过每个组件唯一的ID进行识别</p>
              <p class="hcontent">6、当需要调用一个组件的setState时，React将它标记为脏节点。在事件循环的最后才重新渲染所有的脏节点。如果在根元素上进行setState，则所有的子组件包括没有变化的都会走自己的render方法，可以通过shouldComponentUpdate进行控制不变化组件的渲染</p>
              <h5>二、react中的key的原理以及使用</h5>
              <p class="hcontent">1、key必须是一个字符串，用来唯一标识同父同层级的兄弟元素。</p>
              <p class="hcontent">2、react做diff算法时，子组件会根据唯一标识key去原DOM树种寻找同一key的组件然后进行比较</p>
              <p class="hcontent">3、key不推荐使用数组中key来定义，因为如果数组的顺序或者中间插入一个元素，所有的子元素就会都再次渲染一次</p>
              <p class="hcontent">4、如果k值不容，组件会remove当前组件，然后重新创建一个新组件</p>
              <p class="hcontent">5、k值保持稳定唯一性，用random会增加性能问题</p>
              <p class="hcontent">6、通过k避免组件的重新渲染,这样，this.state.type的值改变时，Son_1和Son2组件的实例没有重新创建，react只是将他们互换位置</p>    
              <p class="hcontent">7、1、DOM是很慢的，其元素非常庞大，页面的性能问题鲜有由JS引起的，大部分都是由DOM操作引起的。如果对前端工作进行抽象的话，主要就是维护状态和更新视图。</p>
              <img  class="hcontent" src="react2.jpg" alt="">
          </div>
      </div>
      <div class="pagination">
        <a href="" class="pre">&ltPre</a>
        <a href="" class="next">Next&gt</a>
      </div>
    </div>
  </div>
  <div class="footer">
    @2012-2017
  </div>
</body>
</html>